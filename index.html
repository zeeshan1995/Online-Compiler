
<html>
    <head>
        <script src="/socket.io/socket.io.js"></script>
        <script src="http://code.jquery.com/jquery-latest.min.js"></script>
        <link rel="stylesheet" type="text/css" href="//fonts.googleapis.com/css?family=Inconsolata" />
        
        <script>
            
            var socket=io();
            
            $(function($){
                
                //Sending
                $("#prog").submit(function(e){
                    e.preventDefault();
                    socket.emit('compile',$("#code").val(),$("#input").val());
                })
                
                $("#roomf").submit(function(e){
                    e.preventDefault();
                    socket.emit('join_room',$("#room_name").val());
                })
            });
            
            //Receiving
            socket.on('compile_msg',function(msg){
                $("#compile_msg").html(msg);
            })
            
            socket.on('edited',function(code){
                $("#code").val(code);
            })
            
            socket.on("room_name",function(name){
                window.location.href=name;
            })
            
            function send(){
                socket.emit('edited',$("#code").val());
            }
        </script>
        
        <style>
            .hidethis{
                display: none;
            }
            #code{
                font-family: Courier New ;
                font-size: 14px;
                font-style: oblique;
                font-variant: normal;
                font-weight: 400;
                line-height: 20px;
                width: 100%;
                height: 100%;
                background-color:#f0f0f0;
                resize:none;
            }
        </style>
    </head>
    
    <body>
      
        <script>
            function x(){
                var url=window.location.href;
                if(url=="http://localhost:8000/"){
                    $("#room").show();
                }
                else
                    $("#main").show();
            }
        </script>
 <!--      
       <div id="room" class="hidethis" style="margin-top:10%;margin-left:30%">
        
           <button type="button" onclick="new_room()"><b>Write New Code</b></button>
           <button type="button" onclick="$('#roomf').show()"><b>Edit Another's Code</b></button>
           
           <br><br>
           
           <form id="roomf" class="hidethis">
               <b>CodeId:</b> <input id="room_name" autocomplete="off">
               <input type="submit" value="Join Others">
           </form>
           
       </div>
     !-->  
       
        <div id="main" class="container" style="margin-top:0%;">
            <p id="codeId" style="margin-left:30%;margin-top=-1%"></p>
            <script>
                var url=window.location.pathname.split('/')[1];
                $("#codeId").html('Your CodeId: '+'<b>'+ url+'<b>');
            </script>
       
            <div class="row" style="width:100%;">
               
                <div class="col-xs-6" style="background-color:green; width:75%;height:65%;float:left">
                    
                     <form id="prog" name="prog"> 
                        <textarea name="code" id="code" oninput="send()" spellcheck="false" autofocus></textarea>
                        <input type="submit" name="button" id="button" value="Compile"/>
                        <input type="checkbox" onclick="$('#input').toggle()">Input <textarea  class="hidethis" name="input" id="input" cols="20" rows="3"></textarea>
                    </form>
                </div>
            </div>
             <div class="col-xs-6" id="chat" style="background-color:green; width:25%;height:75%;float:left"></div>
        </div>
        <div class="row" style="margin-top:30%">
           <div class="col-md-12" id="compile_msg" style="background-color:#09e8d7; width:100%;height:20%;float:left"></div>            
        </div>
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
    </body>
</html>